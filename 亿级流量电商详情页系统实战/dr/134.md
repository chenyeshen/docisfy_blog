# 134. 商品详情页动态渲染系统：机房与机器的规划
规划看之前的架构图，这里只是一部分，不包含微服务的，微服务的在后续部署时再规划，里面包含了 spring cloud 的一套组件，要结合那个去规划

![](./assets/markdown-img-paste-20190714174433377.png)

::: tip 注意
以下机器规划非实际生产，由于本地电脑内存有限，尽量模拟真实的，
会把一些能放一起的合并起来。

但是并不表示在生产环境中也是这样规划，肯定要更多的机器
:::

- 负载均衡：2 台机器

  lvs + keepalived 双机搞可用
- 两个机房，一机房一台：共 2 台

  分发层 nginx + 应用层 nginx + 缓存从集群
- 缓存主集群：放在上面两个机房上

  在实际生成环境中，的确可能会在相同机房，但是肯定是多机器
- 缓存集群分片中间件：与缓存集群部署在一起
- rabbitmq 和 mysql：1 台机器

总共需要 5 台虚拟机
